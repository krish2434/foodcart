{% extends 'base.html' %}

{% block title %}Review Order - FoodCart{% endblock %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card shadow">
                <div class="card-body p-5">
                    <h2 class="mb-4">Review Your Order</h2>
                    <p class="text-muted mb-4">{{ order.restaurant.name }}</p>
                    
                    <form method="POST">
                        {% csrf_token %}
                        
                        <div class="mb-4">
                            <label class="form-label mb-3"><strong>How was your experience?</strong></label>
                            <div class="rating-stars">
                                {% for choice, label in form.rating.field.choices %}
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="rating" id="rating{{ choice }}" value="{{ choice }}">
                                        <label class="form-check-label" for="rating{{ choice }}">
                                            {% for i in "12345" %}
                                                {% if i|add:0 <= choice|add:0 %}★{% else %}☆{% endif %}
                                            {% endfor %}
                                        </label>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>

                        <div class="mb-4">
                            <label for="id_comment" class="form-label">Your Review (Optional)</label>
                            {{ form.comment }}
                        </div>

                        <button type="submit" class="btn btn-danger btn-lg w-100 mb-2">Submit Review</button>
                        <a href="{% url 'order_detail' order.id %}" class="btn btn-secondary btn-lg w-100">Cancel</a>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    textarea {
        border: 1px solid #ddd !important;
        padding: 10px 12px !important;
        width: 100% !important;
        border-radius: 5px !important;
        margin-top: 5px !important;
    }
    
    .rating-stars label {
        font-size: 24px;
        margin-left: 10px;
        cursor: pointer;
    }
</style>
{% endblock %}
